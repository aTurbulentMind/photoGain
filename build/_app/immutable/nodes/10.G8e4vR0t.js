import{s as B,n as P,f as q,r as D}from"../chunks/scheduler.CDuU5eCe.js";import{S as H,i as O,e as g,s as C,c as _,g as E,a as y,b as U,d as v,p as i,h as w,j as p,f as x,l as S,q as j,t as I,o as N,u as z}from"../chunks/index.DrNOQVLA.js";import{s as T}from"../chunks/supabaseClient.DUdbI1C6.js";import{g as W}from"../chunks/entry.BGlN2f1k.js";function F(d){let e,a,n="Email:",l,t,r,s,o="Password:",u,h,b,f,k="Login",L,A;return{c(){e=g("form"),a=g("label"),a.textContent=n,l=C(),t=g("input"),r=C(),s=g("label"),s.textContent=o,u=C(),h=g("input"),b=C(),f=g("button"),f.textContent=k,this.h()},l(m){e=_(m,"FORM",{class:!0});var c=U(e);a=_(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(a)!=="svelte-1flf0h4"&&(a.textContent=n),l=y(c),t=_(c,"INPUT",{type:!0,id:!0,class:!0}),r=y(c),s=_(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(s)!=="svelte-bhu94"&&(s.textContent=o),u=y(c),h=_(c,"INPUT",{type:!0,id:!0,class:!0}),b=y(c),f=_(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),E(f)!=="svelte-1yamoz0"&&(f.textContent=k),c.forEach(v),this.h()},h(){i(a,"for","email"),i(a,"class","svelte-kodlbo"),i(t,"type","text"),i(t,"id","email"),i(t,"class","svelte-kodlbo"),i(s,"for","password"),i(s,"class","svelte-kodlbo"),i(h,"type","password"),i(h,"id","password"),i(h,"class","svelte-kodlbo"),i(f,"type","submit"),i(f,"class","svelte-kodlbo"),i(e,"class","svelte-kodlbo")},m(m,c){w(m,e,c),p(e,a),p(e,l),p(e,t),x(t,d[1]),p(e,r),p(e,s),p(e,u),p(e,h),x(h,d[2]),p(e,b),p(e,f),L||(A=[S(t,"input",d[4]),S(h,"input",d[5]),S(e,"submit",j(d[3]))],L=!0)},p(m,c){c&2&&t.value!==m[1]&&x(t,m[1]),c&4&&h.value!==m[2]&&x(h,m[2])},d(m){m&&v(e),L=!1,D(A)}}}function M(d){let e,a,n=d[0].email+"",l;return{c(){e=g("h1"),a=I("Welcome back, "),l=I(n),this.h()},l(t){e=_(t,"H1",{class:!0});var r=U(e);a=N(r,"Welcome back, "),l=N(r,n),r.forEach(v),this.h()},h(){i(e,"class","svelte-kodlbo")},m(t,r){w(t,e,r),p(e,a),p(e,l)},p(t,r){r&1&&n!==(n=t[0].email+"")&&z(l,n)},d(t){t&&v(e)}}}function R(d){let e,a="Welcome back,",n,l;function t(o,u){return o[0]?M:F}let r=t(d),s=r(d);return{c(){e=g("h1"),e.textContent=a,n=C(),l=g("div"),s.c(),this.h()},l(o){e=_(o,"H1",{class:!0,"data-svelte-h":!0}),E(e)!=="svelte-i6nxgd"&&(e.textContent=a),n=y(o),l=_(o,"DIV",{class:!0});var u=U(l);s.l(u),u.forEach(v),this.h()},h(){i(e,"class","svelte-kodlbo"),i(l,"class","svelte-kodlbo")},m(o,u){w(o,e,u),w(o,n,u),w(o,l,u),s.m(l,null)},p(o,[u]){r===(r=t(o))&&s?s.p(o,u):(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},i:P,o:P,d(o){o&&(v(e),v(n),v(l)),s.d()}}}function V(d,e,a){let n={},l="",t="";const r=(b,f)=>{console.log("Auth state changed:",b,f),a(0,n=f==null?void 0:f.user),n?(console.log("User found:",n),W("/usr_profile")):console.log("No user found")};console.log("Subscribing to auth state changes");const{data:s}=T.auth.onAuthStateChange(r);console.log("Subscribed to auth state changes"),q(()=>{console.log("Unsubscribing from auth state changes"),s!=null&&s.unsubscribe&&(s.unsubscribe(),console.log("Unsubscribed from auth state changes"))});const o=async()=>{console.log("Attempting to log in");try{const{user:b,session:f,error:k}=await T.auth.signInWithPassword({email:l,password:t});if(k)throw console.log("Error during sign in:",k.message),k;b&&(console.log("Login successful, redirecting to user profile"),W("/services"))}catch(b){console.error("Login failed:",b.message)}};function u(){l=this.value,a(1,l)}function h(){t=this.value,a(2,t)}return[n,l,t,o,u,h]}class X extends H{constructor(e){super(),O(this,e,V,R,B,{})}}export{X as component};
